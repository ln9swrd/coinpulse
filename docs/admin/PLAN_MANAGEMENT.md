====================================
Plan Management System - Complete Guide
ìš”ê¸ˆì œ ê´€ë¦¬ ì‹œìŠ¤í…œ
====================================

âœ… COMPLETE! Dynamic plan configuration system created.

====================================
ğŸ“‹ SYSTEM OVERVIEW
====================================

Purpose:
ìš”ê¸ˆì œë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë™ì ìœ¼ë¡œ ê´€ë¦¬
ê°€ê²© ë³€ê²½, ê¸°ëŠ¥ ì¶”ê°€, ì œí•œ ì„¤ì •ì„ ì½”ë“œ ìˆ˜ì • ì—†ì´ ì²˜ë¦¬

Key Features:
- ë™ì  ìš”ê¸ˆì œ ìƒì„±/ìˆ˜ì •/ì‚­ì œ
- ê¸°ëŠ¥ë³„ ì„¸ë°€í•œ ì œí•œ ì„¤ì •
- ê³µê°œ APIë¡œ í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™
- ë¹„êµí‘œ ìë™ ìƒì„±

====================================
ğŸ PLAN STRUCTURE
====================================

Current Plans (ì´ˆê¸° ë°ì´í„°):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£ FREE (ë¬´ë£Œ)
   - Price: 0ì›/ì›”
   - Coins: 1ê°œ
   - Auto-trading: âŒ
   - History: 7ì¼
   - Support: Community

2ï¸âƒ£ PREMIUM (í”„ë¦¬ë¯¸ì—„) â­ ê°€ì¥ ì¸ê¸°
   - Price: 29,900ì›/ì›”, 299,000ì›/ë…„ (17% í• ì¸)
   - Trial: 14ì¼ ë¬´ë£Œ
   - Coins: 10ê°œ
   - Auto-trading: âœ… (ìµœëŒ€ 3ê°œ ì „ëµ)
   - Advanced indicators: âœ…
   - History: ë¬´ì œí•œ
   - Support: Email (24ì‹œê°„ ì´ë‚´)

3ï¸âƒ£ PRO (í”„ë¡œ)
   - Price: 79,900ì›/ì›”, 799,000ì›/ë…„ (17% í• ì¸)
   - Trial: 14ì¼ ë¬´ë£Œ
   - Coins: 20ê°œ
   - Auto-trading: âœ… (ìµœëŒ€ 10ê°œ ì „ëµ)
   - Backtesting: âœ…
   - API Access: âœ…
   - History: ë¬´ì œí•œ
   - Support: Priority (12ì‹œê°„ ì´ë‚´)

4ï¸âƒ£ ENTERPRISE (ì—”í„°í”„ë¼ì´ì¦ˆ)
   - Price: ë§ì¶¤ ê°€ê²©
   - Trial: 30ì¼
   - Coins: ë¬´ì œí•œ
   - Auto-trading: âœ… (ë¬´ì œí•œ)
   - White-labeling: âœ…
   - SLA Guarantee: âœ…
   - Custom Development: âœ…
   - Support: Dedicated (1ì‹œê°„ ì´ë‚´)

====================================
âš™ï¸ FEATURE LIMITS
====================================

Monitoring Limits:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- max_coins: ìµœëŒ€ ëª¨ë‹ˆí„°ë§ ì½”ì¸ ìˆ˜ (0 = ë¬´ì œí•œ)
- max_watchlists: ê´€ì‹¬ì¢…ëª© ë¦¬ìŠ¤íŠ¸ ê°œìˆ˜

Trading Limits:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- auto_trading_enabled: ìë™ë§¤ë§¤ í™œì„±í™”
- max_auto_strategies: ìë™ë§¤ë§¤ ì „ëµ ê°œìˆ˜ (0 = ë¬´ì œí•œ)
- max_concurrent_trades: ë™ì‹œ ê±°ë˜ ê°œìˆ˜ (0 = ë¬´ì œí•œ)

Analysis Features:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- advanced_indicators: ê³ ê¸‰ ê¸°ìˆ  ì§€í‘œ
- custom_indicators: ì»¤ìŠ¤í…€ ì§€í‘œ
- backtesting_enabled: ë°±í…ŒìŠ¤íŒ…

Data Features:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- history_days: íˆìŠ¤í† ë¦¬ ë³´ê´€ ì¼ìˆ˜ (0 = ë¬´ì œí•œ)
- data_export: ë°ì´í„° ë‚´ë³´ë‚´ê¸°
- api_access: API ì ‘ê·¼

Support Levels:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- community: ì»¤ë®¤ë‹ˆí‹° ì§€ì› (72ì‹œê°„)
- email: ì´ë©”ì¼ ì§€ì› (24ì‹œê°„)
- priority: ìš°ì„  ì§€ì› (12ì‹œê°„)
- dedicated: ì „ë‹´ ì§€ì› (1ì‹œê°„)

Enterprise Features:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- white_labeling: í™”ì´íŠ¸ë¼ë²¨ë§
- sla_guarantee: SLA ë³´ì¦
- custom_development: ë§ì¶¤ ê°œë°œ

====================================
ğŸ”§ API ENDPOINTS
====================================

Admin APIs (ê´€ë¦¬ì ì „ìš©):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
GET    /api/admin/plans
       ?include_inactive=true
       ëª¨ë“  í”Œëœ ì¡°íšŒ

GET    /api/admin/plans/:plan_code
       íŠ¹ì • í”Œëœ ì¡°íšŒ

POST   /api/admin/plans
       ìƒˆ í”Œëœ ìƒì„±

PUT    /api/admin/plans/:id
       í”Œëœ ìˆ˜ì •

DELETE /api/admin/plans/:id
       í”Œëœ ì‚­ì œ (ë¹„í™œì„±í™”)

Public APIs (ì¸ì¦ ë¶ˆí•„ìš”):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
GET    /api/admin/plans/public
       ê³µê°œ í”Œëœ ëª©ë¡

GET    /api/admin/plans/compare
       í”Œëœ ë¹„êµí‘œ ë°ì´í„°

POST   /api/admin/plans/check-limit
       ê¸°ëŠ¥ ì œí•œ ì²´í¬

====================================
ğŸ’» USAGE EXAMPLES
====================================

Example 1: ê³µê°œ í”Œëœ ëª©ë¡ ì¡°íšŒ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
GET /api/admin/plans/public

Response:
{
  "success": true,
  "plans": [
    {
      "plan_code": "free",
      "plan_name": "Free",
      "plan_name_ko": "ë¬´ë£Œ",
      "price": {
        "monthly": 0,
        "annual": 0
      },
      "limits": {
        "max_coins": 1,
        "max_watchlists": 1
      },
      "features": {
        "auto_trading": false,
        "advanced_indicators": false,
        ...
      }
    },
    ...
  ]
}

Example 2: í”Œëœ ë¹„êµí‘œ ì¡°íšŒ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
GET /api/admin/plans/compare

Response:
{
  "success": true,
  "comparison": [
    {
      "plan_code": "premium",
      "plan_name": "í”„ë¦¬ë¯¸ì—„",
      "monthly_price": 29900,
      "annual_price": 299000,
      "badge": "ê°€ì¥ ì¸ê¸°",
      "is_featured": true,
      "features": {
        "monitoring": {
          "coins": 10,
          "watchlists": 5
        },
        "trading": {
          "auto_trading": true,
          "strategies": 3,
          "concurrent_trades": 5
        },
        ...
      },
      "cta": "ë¬´ë£Œ ì²´í—˜ ì‹œì‘"
    },
    ...
  ]
}

Example 3: ê¸°ëŠ¥ ì œí•œ ì²´í¬
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
POST /api/admin/plans/check-limit
{
  "plan_code": "premium",
  "feature": "coins",
  "current_count": 5
}

Response:
{
  "success": true,
  "limit_check": {
    "allowed": true,
    "limit": 10,
    "current": 5
  }
}

Example 4: ìƒˆ í”Œëœ ìƒì„± (ê´€ë¦¬ì)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
POST /api/admin/plans
Authorization: Bearer coinpulse_admin_2024_secure_token
{
  "plan_code": "starter",
  "plan_name": "Starter",
  "plan_name_ko": "ìŠ¤íƒ€í„°",
  "monthly_price": 19900,
  "annual_price": 199000,
  "max_coins": 5,
  "auto_trading_enabled": true,
  "max_auto_strategies": 1,
  "trial_days": 7
}

Example 5: í”Œëœ ìˆ˜ì • (ê´€ë¦¬ì)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PUT /api/admin/plans/2
Authorization: Bearer coinpulse_admin_2024_secure_token
{
  "monthly_price": 27900,
  "badge_text": "í• ì¸ ì¤‘"
}

====================================
ğŸ” CODE INTEGRATION
====================================

í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í”Œëœ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// pricing.html ë˜ëŠ” pricing.js
async function loadPlans() {
    const response = await fetch('/api/admin/plans/compare');
    const data = await response.json();
    
    if (data.success) {
        renderPricingCards(data.comparison);
    }
}

function renderPricingCards(plans) {
    plans.forEach(plan => {
        const card = document.createElement('div');
        card.className = `pricing-card ${plan.is_featured ? 'featured' : ''}`;
        
        card.innerHTML = `
            ${plan.badge ? `<div class="featured-badge">${plan.badge}</div>` : ''}
            <div class="plan-name">${plan.plan_name}</div>
            <div class="plan-price">
                <span class="price">${plan.monthly_price.toLocaleString()}</span>
                <span class="currency">ì›/ì›”</span>
            </div>
            <ul class="plan-features">
                <li>${plan.features.monitoring.coins}ê°œ ì½”ì¸ ëª¨ë‹ˆí„°ë§</li>
                <li>${plan.features.trading.auto_trading ? 'ì™„ì „ ìë™ë§¤ë§¤' : 'ìˆ˜ë™ ê±°ë˜ë§Œ'}</li>
                ...
            </ul>
            <a href="signup.html?plan=${plan.plan_code}" class="btn">
                ${plan.cta}
            </a>
        `;
        
        pricingContainer.appendChild(card);
    });
}

ê¸°ëŠ¥ ì œí•œ ì²´í¬ (ë¡œì»¬):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
async function canAddCoin(userPlan, currentCoinCount) {
    const response = await fetch('/api/admin/plans/check-limit', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
            plan_code: userPlan,
            feature: 'coins',
            current_count: currentCoinCount
        })
    });
    
    const data = await response.json();
    
    if (!data.limit_check.allowed) {
        alert(`í”Œëœ ì œí•œ: ìµœëŒ€ ${data.limit_check.limit}ê°œê¹Œì§€ë§Œ ì¶”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
        showUpgradeModal();
        return false;
    }
    
    return true;
}

ë°±ì—”ë“œì—ì„œ ê¸°ëŠ¥ ì œí•œ ì²´í¬:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
from backend.models import PlanConfig

def add_coin_to_watchlist(user_subscription, coin_symbol):
    # í˜„ì¬ ê°œìˆ˜ í™•ì¸
    current_count = get_user_coin_count(user_subscription.user_id)
    
    # ì œí•œ ì²´í¬
    check = PlanConfig.check_feature_limit(
        user_subscription,
        'coins',
        current_count
    )
    
    if not check['allowed']:
        return {
            'success': False,
            'error': f'Plan limit reached: {check["limit"]} coins maximum',
            'upgrade_required': True
        }
    
    # ì½”ì¸ ì¶”ê°€
    add_coin(user_subscription.user_id, coin_symbol)
    
    return {'success': True}

====================================
ğŸ“¦ INSTALLATION
====================================

Step 1: Upload Files
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- backend/models/plan_config.py
- backend/routes/plan_admin.py
- backend/migrations/005_add_plan_configs.sql
- backend/models/__init__.py (updated)
- app.py (updated)

Step 2: Run Migration
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ssh root@158.247.222.216
cd /opt/coinpulse
psql -U postgres -d coinpulse -f backend/migrations/005_add_plan_configs.sql

Expected output:
CREATE TABLE
CREATE INDEX (x2)
CREATE FUNCTION
CREATE TRIGGER
INSERT 0 4  # 4 initial plans

Step 3: Restart Service
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
systemctl restart coinpulse
systemctl status coinpulse

Step 4: Test APIs
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Public plans
curl http://coinpulse.sinsi.ai/api/admin/plans/public

# Comparison
curl http://coinpulse.sinsi.ai/api/admin/plans/compare

# Admin (with token)
curl -H "Authorization: Bearer coinpulse_admin_2024_secure_token" \
     http://coinpulse.sinsi.ai/api/admin/plans?include_inactive=true

====================================
ğŸ¯ PRICE CORRECTION
====================================

Current Issue:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ëœë”©í˜ì´ì§€: 29,900ì›
ë°±ì—”ë“œ ì½”ë“œ: 29,000ì› â† ë¶ˆì¼ì¹˜!

Solution (ë°ì´í„°ë² ì´ìŠ¤ ê¸°ë°˜):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ì— 29,900ì›ìœ¼ë¡œ ì„¤ì •ë¨
âœ… í”„ë¡ íŠ¸ì—”ë“œëŠ” APIì—ì„œ ê°€ê²© ê°€ì ¸ì˜´
âœ… ì¼ê´€ì„± ë³´ì¥!

ì—…ë°ì´íŠ¸ ë°©ë²•:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PUT /api/admin/plans/2
{
  "monthly_price": 29900,
  "annual_price": 299000
}

====================================
âœ… BENEFITS
====================================

âœ… ë™ì  ê´€ë¦¬: ì½”ë“œ ìˆ˜ì • ì—†ì´ ìš”ê¸ˆì œ ë³€ê²½
âœ… ì„¸ë°€í•œ ì œí•œ: ê¸°ëŠ¥ë³„ ê°œë³„ ì„¤ì •
âœ… ê³µê°œ API: í”„ë¡ íŠ¸ì—”ë“œ ìë™ ì—°ë™
âœ… ë¹„êµí‘œ ìë™ìƒì„±: ë§ˆì¼€íŒ… ìë£Œ ìë™í™”
âœ… ì¼ê´€ì„±: ë‹¨ì¼ ì§„ì‹¤ ì¶œì²˜ (DB)
âœ… í™•ì¥ì„±: ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‰¬ì›€
âœ… A/B í…ŒìŠ¤íŒ…: í”Œëœë³„ ì „í™˜ìœ¨ ì¶”ì  ê°€ëŠ¥

====================================
ğŸš€ NEXT STEPS
====================================

1ï¸âƒ£ í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™:
   - pricing.html API í˜¸ì¶œë¡œ ë³€ê²½
   - ë™ì  í”Œëœ ì¹´ë“œ ìƒì„±
   - ë¹„êµí‘œ ìë™ ì—…ë°ì´íŠ¸

2ï¸âƒ£ ê¸°ëŠ¥ ì œí•œ ì ìš©:
   - ì½”ì¸ ì¶”ê°€ ì‹œ ì œí•œ ì²´í¬
   - ìë™ë§¤ë§¤ ì „ëµ ìƒì„± ì‹œ ì œí•œ ì²´í¬
   - ì—…ê·¸ë ˆì´ë“œ ìœ ë„ UI

3ï¸âƒ£ ë¶„ì„ ëŒ€ì‹œë³´ë“œ:
   - í”Œëœë³„ ê°€ì…ì ìˆ˜
   - ì „í™˜ìœ¨ ì¶”ì 
   - ìˆ˜ìµ ë¶„ì„

====================================

ğŸŠ PLAN MANAGEMENT SYSTEM READY!

ëª¨ë“  ìš”ê¸ˆì œë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê´€ë¦¬!
ê°€ê²© ë³€ê²½ì€ ì´ì œ API í˜¸ì¶œ í•˜ë‚˜ë¡œ ë!

====================================